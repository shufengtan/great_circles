<html>
<head>
<script>
function get_deg(d, m, s){
  var deg=(d == "") ? 0 : parseFloat(d);
  var f=(m == "" ? 0 : parseFloat(m)/60.0) + (s == "" ? 0 : parseFloat(s)/3600.0);
  if (deg<0){
    deg = deg - f;
  } else {
    deg = deg + f;
  }
  return deg;
}
function calc(){
  var lat1 = get_deg(gr8c.lat1.value, gr8c.lat1m.value, gr8c.lat1s.value);
  var lon1 = get_deg(gr8c.lon1.value, gr8c.lon1m.value, gr8c.lon1s.value);
  var lat2 = get_deg(gr8c.lat2.value, gr8c.lat2m.value, gr8c.lat2s.value);
  var lon2 = get_deg(gr8c.lon2.value, gr8c.lon2m.value, gr8c.lon2s.value);
  var rho = dist(lat1, lon1, lat2, lon2);
  var d_km = 6371*rho;
  var d_miles = 3959*rho;
  var res = 'Distance = '+d_km+' km, ' + d_miles + ' miles</div>';
  var notes = 'Point A: ('+lat1+', '+lon1+') Point B: ('+lat2+', '+lon2+')<br>';
  notes += 'rho = ' + rho;
  document.getElementById('result').innerHTML = res;
  document.getElementById('notes').innerHTML = notes;
}
function dist(lat1, lon1, lat2, lon2){
  var deg2rad = Math.PI/180.0;
  var lat1r = lat1*deg2rad;
  var lat2r = lat2*deg2rad;
  var delta_lon = (lon2 - lon1)*deg2rad;
  var cos_rho = Math.sin(lat1r)*Math.sin(lat2r) + Math.cos(lat1r)*Math.cos(lat2r)*Math.cos(delta_lon);
  return Math.acos(cos_rho);
}
</script>
</head>
<body>
<h1>Shortest distance between two points on Earth</h1>
<form name="gr8c">
        <table><thead><td>Point</td><td>Latitude</td><td width="20"/><td>Longitude</td></thead>
  <tr><td style="text-align: center">A</td>
      <td>
        <input name="lat1"  type="text" value="0" size="6" maxlength="10" style="text-align: right">&deg;
        <input name="lat1m" type="text" value="0" size="1" maxlength="2" style="text-align: right">'
        <input name="lat1s" type="text" value="0" size="3" maxlength="7" style="text-align: right">"
      </td>
      <td/>
      <td>
        <input name="lon1"  type="text" value="0" size="6" maxlength="10" style="text-align: right">&deg;
        <input name="lon1m" type="text" value="0" size="1" maxlength="2" style="text-align: right">'
        <input name="lon1s" type="text" value="0" size="3" maxlength="7" style="text-align: right">"
      </td>
  </tr>
  <tr><td style="text-align: center">B</td>
      <td>
        <input name="lat2"  type="text" value="0" size="6" maxlength="10" style="text-align: right">&deg;
        <input name="lat2m" type="text" value="0" size="1" maxlength="2" style="text-align: right">'
        <input name="lat2s" type="text" value="0" size="3" maxlength="7" style="text-align: right">"
      </td>
      <td/>
      <td>
        <input name="lon2"  type="text" value="0" size="6" maxlength="10" style="text-align: right">&deg;
        <input name="lon2m" type="text" value="0" size="1" maxlength="2" style="text-align: right">'
        <input name="lon2s" type="text" value="0" size="3" maxlength="7" style="text-align: right">"
      </td>
  </tr>
  </table>
</form>
<button onclick="calc();">Go!</button>
<div id="result" style="font-weight: bold"></div>
<div id="notes"></div>
</body>
</html>
